<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Dungeness Crab Calculator — How Much Per Person | DinnerMath</title>
<style>
  :root{
    --bg:#ffffff; --fg:#111111; --muted:#6b7280; --line:#111111; --card:#ffffff;
    --accent:#111111;
  }
  html,body{margin:0;padding:0;background:var(--bg);color:var(--fg);font-family:"Brandon Grotesque","Brandon Text","Avenir Next","Segoe UI",system-ui,-apple-system,Arial,sans-serif;}
  .wrap{max-width:860px;margin:32px auto;padding:0 16px;}
  h1{font-size:28px;letter-spacing:0.3px;margin:0 0 12px 0}
  p.lede{color:var(--muted);margin:0 0 20px 0;line-height:1.45}
  .grid{display:grid;gap:14px}
  @media(min-width:720px){.grid{grid-template-columns:1fr 1fr}}
  .card{background:var(--card);border:2px solid var(--line);border-radius:14px;padding:16px}
  .sec-title{font-weight:700;margin:0 0 8px 0}
  label{font-size:14px;color:var(--muted);display:block;margin:0 0 6px 0}
  input[type="number"], select{
    width:100%;padding:10px 12px;border:1.5px solid #d1d5db;border-radius:10px;background:#fff;color:var(--fg);
    font-size:16px;appearance:textfield;
  }
  input[type="number"]::-webkit-outer-spin-button,input[type="number"]::-webkit-inner-spin-button{appearance:none;margin:0}
  .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  .btns{display:flex;flex-wrap:wrap;gap:8px}
  button{
    border:2px solid var(--line);background:#fff;color:var(--accent);padding:10px 14px;border-radius:999px;cursor:pointer;
    font-weight:700;letter-spacing:.2px
  }
  button.ghost{background:transparent}
  .results{border:3px solid var(--line);border-radius:16px;padding:16px;background:#fff}
  .kv{display:flex;justify-content:space-between;align-items:center;border-bottom:1.5px dashed #d1d5db;padding:10px 0}
  .kv:last-child{border-bottom:none}
  .k{font-weight:700}
  .v{font-variant-numeric:tabular-nums}
  .muted{color:var(--muted)}
  .pill{display:inline-block;border:1.5px solid var(--line);border-radius:999px;padding:6px 10px;font-size:14px;margin-right:8px}
  .faq h2{font-size:20px;margin:18px 0 10px 0}
  details{border:1.5px solid #d1d5db;border-radius:10px;padding:10px 12px;background:#fff}
  details+details{margin-top:10px}
  summary{font-weight:700;cursor:pointer;outline:none}
</style>
</head>
<body>
  <div class="wrap" id="dm-app">
    <h1>Dungeness Crab Quantity Calculator — How Much Per Person</h1>
    <p class="lede">How much Dungeness crab per person? Enter guests and settings — or tap a quick preset (10, 25, 50, 100). We estimate raw pounds (in shell) and an approximate whole-crab count so you buy the right amount.</p>

    <!-- Presets -->
    <div class="card" aria-label="Quick presets">
      <div class="sec-title">Quick presets</div>
      <div class="btns">
        <button data-preset="10">10 people</button>
        <button data-preset="25">25 people</button>
        <button data-preset="50">50 people</button>
        <button data-preset="100">100 people</button>
        <button id="dm-reset" class="ghost">Reset</button>
      </div>
      <p class="muted" style="margin-top:8px">Presets assume all adults. Adjust Teens/Children manually.</p>
    </div>

    <!-- Inputs -->
    <div class="grid" style="margin-top:14px">
      <div class="card">
        <div class="sec-title">Guests</div>
        <div class="row">
          <div><label for="adults">Adults</label><input id="adults" type="number" min="0" step="1" value="10" /></div>
          <div><label for="teens">Teens</label><input id="teens" type="number" min="0" step="1" value="0" /></div>
        </div>
        <div class="row" style="margin-top:12px">
          <div><label for="children">Children</label><input id="children" type="number" min="0" step="1" value="0" /></div>
          <div>
            <label for="appetite">Appetite</label>
            <select id="appetite">
              <option value="0.90">Light (0.90)</option>
              <option value="1.00" selected>Typical (1.00)</option>
              <option value="1.20">Hearty (1.20)</option>
            </select>
          </div>
        </div>
        <div class="row" style="margin-top:12px">
          <div>
            <label for="leftovers">Leftovers</label>
            <select id="leftovers">
              <option value="0">No</option>
              <option value="0.10">+10%</option>
              <option value="0.20">+20%</option>
            </select>
          </div>
          <div>
            <label for="avgWeight">Average whole crab weight (lb)</label>
            <input id="avgWeight" type="number" min="1" step="0.1" value="2.0" />
          </div>
        </div>
      </div>

      <div class="card">
        <div class="sec-title">Pricing (optional)</div>
        <div class="row">
          <div><label for="price">Price per lb (raw)</label><input id="price" type="number" min="0" step="0.01" value="0" /></div>
          <div><label for="tax">Tax %</label><input id="tax" type="number" min="0" step="0.01" value="0" /></div>
        </div>
        <div class="row" style="margin-top:12px">
          <div><label for="fees">Fees %</label><input id="fees" type="number" min="0" step="0.01" value="0" /></div>
          <div>
            <label for="notes">Notes</label>
            <input id="notes" type="text" placeholder="store, sale, etc. (optional)" />
          </div>
        </div>
        <p class="muted" style="margin-top:10px">Subtotal uses <span class="pill">rounded raw lb × price</span>, then adds tax + fees.</p>
      </div>
    </div>

    <!-- Results -->
    <div class="results" style="margin-top:14px" aria-live="polite">
      <div class="kv"><div class="k">Total guests</div><div class="v" id="outGuests">10</div></div>
      <div class="kv"><div class="k">About raw pounds to buy (in shell)</div><div class="v" id="outRaw">—</div></div>
      <div class="kv"><div class="k">Approx. whole Dungeness crabs</div><div class="v" id="outCrabs">—</div></div>
      <div class="kv"><div class="k">Estimated cost</div><div class="v" id="outCost">$0.00</div></div>
      <div class="kv"><div class="k">Settings</div><div class="v" id="outSettings" class="muted">Typical appetite, no leftovers</div></div>
    </div>

    <!-- FAQs -->
    <section class="faq" style="margin-top:18px">
      <h2>FAQs</h2>
      <details>
        <summary>How much Dungeness crab per person?</summary>
        <div class="muted">Plan about <strong>2 lb per adult</strong> (whole, in shell) for a main course. Teens count as about three-quarters of an adult and children about half. Use the appetite and leftovers settings to fine-tune.</div>
      </details>
      <details>
        <summary>How many whole crabs is that?</summary>
        <div class="muted">Average whole Dungeness crabs weigh about <strong>2 lb each</strong>. Enter your average weight to convert pounds to an estimated crab count.</div>
      </details>
      <details>
        <summary>Does cooked yield matter?</summary>
        <div class="muted">Because you’re buying whole crabs in shell, the calculator works in <strong>raw pounds</strong>. If you need picked meat only, assume roughly 20–25% edible yield and size up accordingly.</div>
      </details>
      <details>
        <summary>Leftovers or big eaters?</summary>
        <div class="muted">Choose Hearty appetite (+20%) or add <strong>+10% or +20%</strong> leftovers to cover extra servings or next-day meals.</div>
      </details>
    </section>
  </div>

  <script>
    // ====== Helpers ======
    const $ = sel => document.querySelector(sel);
    const roundQuarter = n => Math.round(n * 4) / 4;

    // ====== Elements ======
    const adults = $("#adults");
    const teens = $("#teens");
    const children = $("#children");
    const appetite = $("#appetite");
    const leftovers = $("#leftovers");
    const avgWeight = $("#avgWeight");
    const price = $("#price");
    const tax = $("#tax");
    const fees = $("#fees");

    const outGuests = $("#outGuests");
    const outRaw = $("#outRaw");
    const outCrabs = $("#outCrabs");
    const outCost = $("#outCost");
    const outSettings = $("#outSettings");

    // ====== Assumptions ======
    // Base per-person (Typical appetite), whole in-shell
    const BASE_ADULT_LB = 2.0;
    const TEEN_FACTOR = 0.75;
    const CHILD_FACTOR = 0.50;

    function calc(){
      const a = +adults.value || 0;
      const t = +teens.value || 0;
      const c = +children.value || 0;
      const appet = +appetite.value || 1.0;
      const left = +leftovers.value || 0;
      const avg = Math.max(+avgWeight.value || 2.0, 0.1);

      const guests = a + t + c;

      // raw pounds before leftovers: per-person × factors × appetite
      const baseLb =
        (a * BASE_ADULT_LB) +
        (t * BASE_ADULT_LB * TEEN_FACTOR) +
        (c * BASE_ADULT_LB * CHILD_FACTOR);

      const appetLb = baseLb * appet;
      const rawLb = appetLb * (1 + left);
      const rawRounded = roundQuarter(rawLb);

      // crab count estimate
      const crabs = avg > 0 ? Math.max(0, Math.round(rawRounded / avg)) : 0;

      // pricing
      const p = +price.value || 0;
      const sub = rawRounded * p;
      const total = sub * (1 + (+tax.value||0)/100) * (1 + (+fees.value||0)/100);

      outGuests.textContent = guests;
      outRaw.textContent = guests ? rawRounded.toFixed(2) + " lb" : "—";
      outCrabs.textContent = guests ? (crabs > 0 ? "about " + crabs : "—") : "—";
      outCost.textContent = (p>0 && guests>0) ? "$" + total.toFixed(2) : "$0.00";

      const appetLabel = appetite.options[appetite.selectedIndex]?.text || "Typical (1.00)";
      const leftLabel = leftovers.options[leftovers.selectedIndex]?.text || "No";
      outSettings.textContent = appetLabel.replace(/\s*\(.+\)\s*/,"") + ", " + leftLabel.toLowerCase() + " leftovers";
    }

    // Auto-calc
    ["input","change"].forEach(evt=>{
      document.getElementById("dm-app").addEventListener(evt, e=>{
        if(["adults","teens","children","appetite","leftovers","avgWeight","price","tax","fees"].includes(e.target.id)){
          calc();
        }
      }, true);
    });

    // Presets
    document.querySelectorAll("[data-preset]").forEach(btn=>{
      btn.addEventListener("click", ()=>{
        const n = +btn.getAttribute("data-preset");
        adults.value = n; teens.value = 0; children.value = 0;
        appetite.value = "1.00"; leftovers.value = "0"; avgWeight.value = "2.0";
        price.value = price.value || 0; tax.value = tax.value || 0; fees.value = fees.value || 0;
        calc();
      });
    });

    // Reset
    document.getElementById("dm-reset").addEventListener("click", ()=>{
      adults.value = 10; teens.value = 0; children.value = 0;
      appetite.value = "1.00"; leftovers.value = "0"; avgWeight.value = "2.0";
      price.value = 0; tax.value = 0; fees.value = 0;
      calc();
    });

    // Init
    calc();
  </script>

  <!-- JSON-LD FAQ Schema (4 items per v1.7 lock) -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"FAQPage",
    "mainEntity":[
      {"@type":"Question","name":"How much Dungeness crab per person?","acceptedAnswer":{"@type":"Answer","text":"Plan about 2 lb per adult (whole, in shell) for a main course. Teens count as about three-quarters of an adult and children about half. Use the appetite and leftovers settings to fine-tune."}},
      {"@type":"Question","name":"How many whole crabs is that?","acceptedAnswer":{"@type":"Answer","text":"Average whole Dungeness crabs weigh about 2 lb each. Enter your average weight to convert pounds to an estimated crab count."}},
      {"@type":"Question","name":"Does cooked yield matter?","acceptedAnswer":{"@type":"Answer","text":"Because you’re buying whole crabs in shell, the calculator works in raw pounds. If you need picked meat only, assume roughly 20–25% edible yield and size up accordingly."}},
      {"@type":"Question","name":"Leftovers or big eaters?","acceptedAnswer":{"@type":"Answer","text":"Choose Hearty appetite (+20%) or add +10% or +20% leftovers to cover extra servings or next-day meals."}}
    ]
  }
  </script>
</body>
</html>
